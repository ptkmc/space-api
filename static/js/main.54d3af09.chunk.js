(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{126:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a.n(n),o=a(86),s=a.n(o),i=a(61),c=a.n(i),u=a(75),l=a(41),p=a(42),m=a(44),h=a(43),d=a(46),f=a(76),v=a.n(f),g=a(88),y=a(72),b=a(131),w=a(134),E=a(133),j=a(132),O=a(15),k=a(87),L=a(135),S=a(78),C=a(79),N=a(73),x=a(62),I=a(77),z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={map:{},receiving:!1,curLineLayer:2},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"updatePoint",value:function(e){this.state.map.getLayers().item(1).getSource().getFeatures()[0].getGeometry().setCoordinates(e)}},{key:"updateLine",value:function(e,t){this.state.map.getLayers().item(t).getSource().getFeatures()[0].getGeometry().appendCoordinate(e)}},{key:"addPoint",value:function(e){var t=new I.a({geometry:new k.a(e),name:"Point"}),a=new S.b({image:new C.a({radius:5,fill:new N.a({color:"rgb(116, 68, 172)"})}),zIndex:3}),n=new E.a({features:[t]}),r=new b.a({source:n,style:[a],zIndex:3});this.state.map.addLayer(r)}},{key:"addLine",value:function(e){var t=new L.a(e);t.transform("EPSG:4326","EPSG:3857");var a=new I.a({geometry:t,name:"Line"}),n=new S.b({stroke:new x.a({color:"rgb(116, 68, 172, .33)",width:10}),zIndex:2}),r=new E.a({features:[a]}),o=new b.a({source:r,style:[n],zIndex:2});this.state.map.addLayer(o)}},{key:"hasWrapped",value:function(e,t){var a=this.state.map.getLayers().item(t).getSource().getFeatures()[0].getGeometry().flatCoordinates,n=a[a.length-2]>9e6&&e[0]<-9e6,r=a[a.length-2]<-9e6&&e[0]>9e6,o=a[a.length-1]>45e5&&e[1]<-45e5,s=a[a.length-1]<-45e5&&e[1]>45e5;return!!(n||r||o||s)}},{key:"componentDidUpdate",value:function(){var e=Object(O.d)(this.props.coords),t=this.state.curLineLayer;e[0]&&e[1]&&(this.state.receiving?(this.hasWrapped(e,t)&&(this.addLine([]),t+=1,this.setState({curLineLayer:t})),this.updatePoint(e),this.updateLine(e,t)):(this.addPoint(e),this.addLine([]),this.setState({receiving:!0}),this.state.map.getView().setCenter(e)))}},{key:"componentDidMount",value:function(){var e=new g.a({target:"map",layers:[new w.a({source:new j.a({})})],view:new y.a({center:Object(O.d)([0,0]),zoom:2}),controls:[]});this.setState({map:e})}},{key:"render",value:function(){return r.a.createElement("div",{id:"map",className:"map"})}}]),t}(r.a.Component),A=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"astronaut"},r.a.createElement("img",{className:"ui avatar image",src:"astronaut-avatar.svg",alt:"astronaut avatar"}),r.a.createElement("span",null,this.props.person.name))}}]),t}(r.a.Component),P=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"pluralizer",value:function(e){return 1===e?"is":"are"}},{key:"getCrafts",value:function(){for(var e=Object.values(this.props.astronauts.people),t={},a=0;a<e.length;a++){var n=e[a].craft;t[n]=t[n]?t[n]+1:1}var r=Object.keys(t);if(0===r.length)return".";if(1===r.length)return" and all of them are aboard the ".concat(r[0],".");for(var o="",s=0;s<r.length;s++){var i=t[r[s]];0===s?o+=". ".concat(i," ").concat(this.pluralizer(i)," aboard the ").concat(r[s]):s!==r.length-1?o+=", ".concat(i," ").concat(this.pluralizer(i)," aboard the ").concat(r[s]):o+=", and ".concat(i," ").concat(this.pluralizer(i)," aboard the ").concat(r[s],".")}return o}},{key:"shouldComponentUpdate",value:function(e){return this.props.astronauts!==e.astronauts}},{key:"render",value:function(){if(this.props.astronauts){var e=this.props.astronauts.people.map(function(e){return r.a.createElement(A,{person:e,key:e.name})});return r.a.createElement("div",null,r.a.createElement("h1",null,"Astronauts in Space"),r.a.createElement("p",null,"There are currently ",r.a.createElement("strong",null,this.props.astronauts.number)," ","astronauts in space",this.getCrafts()),r.a.createElement("ul",{className:"astronauts"},e))}return r.a.createElement("div",null,r.a.createElement("h1",null,"Astronauts in Space"),r.a.createElement("p",null,r.a.createElement("i",{className:"exclamation triangle icon"}),"Unable to get current astronauts. Retrying in 5 min, or"," ",r.a.createElement("a",{href:"#",onClick:function(){return window.location.reload(!1)}},"refresh")," ","the window."))}}]),t}(r.a.Component),D=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){if(void 0===this.props.coords||void 0===this.props.timestamp)return r.a.createElement("div",null,r.a.createElement("h1",null,"Current Location of the ISS"),r.a.createElement("div",{className:"location-info"},r.a.createElement("p",null,r.a.createElement("i",{className:"exclamation triangle icon"}),"Unable to get current location. Retrying in 5 seconds...")));var e="".concat(this.props.coords[1],", ").concat(this.props.coords[0]),t=new Date(parseInt(this.props.timestamp+"000")).toLocaleTimeString();return r.a.createElement("div",null,r.a.createElement("h1",null,"Current Location of the ISS"),r.a.createElement("div",{className:"location-info"},r.a.createElement("p",{className:"coords"},e),r.a.createElement("p",null,t)))}}]),t}(r.a.Component),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={coords:[],timestamp:void 0,astronauts:void 0},a.getAstronauts=Object(u.a)(c.a.mark(function e(){var t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"http://api.open-notify.org/astros.json",e.prev=1,e.next=4,v.a.get("http://api.open-notify.org/astros.json");case 4:t=e.sent,a.setState({astronauts:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.setState({astronauts:void 0});case 11:case"end":return e.stop()}},e,null,[[1,8]])})),a.getLocation=Object(u.a)(c.a.mark(function e(){var t,n,r,o,s,i;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"http://api.open-notify.org/iss-now.json",e.prev=1,e.next=4,v.a.get("http://api.open-notify.org/iss-now.json");case 4:t=e.sent,n=t.data.iss_position,r=n.latitude,o=n.longitude,s=t.data.timestamp,i=[parseFloat(o),parseFloat(r)],a.setState({coords:i,timestamp:s}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),a.setState({coords:[],timestamp:void 0});case 14:case"end":return e.stop()}},e,null,[[1,11]])})),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getAstronauts(),setInterval(function(){e.getAstronauts()},3e5),this.getLocation(),setInterval(function(){e.getLocation()},5e3)}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui container main"},r.a.createElement(P,{astronauts:this.state.astronauts}),r.a.createElement(D,{coords:this.state.coords,timestamp:this.state.timestamp}),r.a.createElement(z,{coords:this.state.coords}),r.a.createElement("p",{className:"attribution"},"Data provided courtesy of"," ",r.a.createElement("a",{href:"http://open-notify.org/Open-Notify-API/ISS-Location-Now/"},"Open Notify.")," ","Icons by"," ",r.a.createElement("a",{href:"https://www.flaticon.com/authors/srip",title:"srip"},"srip")," ","under"," ",r.a.createElement("a",{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank",rel:"noopener noreferrer"},"CC 3.0 BY.")))}}]),t}(r.a.Component);s.a.render(r.a.createElement(F,null),document.querySelector("#root"))},98:function(e,t,a){e.exports=a(126)}},[[98,1,2]]]);
//# sourceMappingURL=main.54d3af09.chunk.js.map