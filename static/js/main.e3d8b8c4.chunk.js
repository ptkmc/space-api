(this["webpackJsonpspace-api"]=this["webpackJsonpspace-api"]||[]).push([[0],{123:function(e,t,a){"use strict";a.r(t);var n=a(9),r=a.n(n),s=a(86),o=a.n(s),c=a(61),i=a.n(c),l=a(75),u=a(41),p=a(42),m=a(44),h=a(43),d=a(45),v=a(76),f=a.n(v),g=a(88),b=a(72),y=a(128),E=a(132),j=a(130),w=a(129),O=a(15),k=a(87),L=a(131),S=a(78),C=a(79),N=a(73),x=a(62),I=a(77),z=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={map:{},receiving:!1,curLineLayer:2},a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"updatePoint",value:function(e){this.state.map.getLayers().item(1).getSource().getFeatures()[0].getGeometry().setCoordinates(e)}},{key:"updateLine",value:function(e,t){this.state.map.getLayers().item(t).getSource().getFeatures()[0].getGeometry().appendCoordinate(e)}},{key:"addPoint",value:function(e){var t=new I.a({geometry:new k.a(e),name:"Point"}),a=new S.b({image:new C.a({radius:5,fill:new N.a({color:"rgb(116, 68, 172)"})}),zIndex:3}),n=new j.a({features:[t]}),r=new y.a({source:n,style:[a],zIndex:3});this.state.map.addLayer(r)}},{key:"addLine",value:function(e){var t=new L.a(e);t.transform("EPSG:4326","EPSG:3857");var a=new I.a({geometry:t,name:"Line"}),n=new S.b({stroke:new x.a({color:"rgb(116, 68, 172, .33)",width:10}),zIndex:2}),r=new j.a({features:[a]}),s=new y.a({source:r,style:[n],zIndex:2});this.state.map.addLayer(s)}},{key:"hasWrapped",value:function(e,t){var a=this.state.map.getLayers().item(t).getSource().getFeatures()[0].getGeometry().flatCoordinates,n=a[a.length-2]>9e6&&e[0]<-9e6,r=a[a.length-2]<-9e6&&e[0]>9e6,s=a[a.length-1]>45e5&&e[1]<-45e5,o=a[a.length-1]<-45e5&&e[1]>45e5;return!!(n||r||s||o)}},{key:"componentDidUpdate",value:function(){var e=Object(O.d)(this.props.coords),t=this.state.curLineLayer;e[0]&&e[1]&&(this.state.receiving?(this.hasWrapped(e,t)&&(this.addLine([]),t+=1,this.setState({curLineLayer:t})),this.updatePoint(e),this.updateLine(e,t)):(this.addPoint(e),this.addLine([]),this.setState({receiving:!0}),this.state.map.getView().setCenter(e)))}},{key:"componentDidMount",value:function(){var e=new g.a({target:"map",layers:[new E.a({source:new w.a({})})],view:new b.a({center:Object(O.d)([0,0]),zoom:2}),controls:[]});this.setState({map:e})}},{key:"render",value:function(){return r.a.createElement("div",{id:"map",className:"map"})}}]),t}(r.a.Component),A=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"astronaut"},r.a.createElement("img",{className:"ui avatar image",src:"astronaut-avatar.svg",alt:"astronaut avatar"}),r.a.createElement("span",null,this.props.person.name))}}]),t}(r.a.Component),P=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"pluralizer",value:function(e){return 1===e?"is":"are"}},{key:"getCrafts",value:function(){for(var e=Object.values(this.props.astronauts.people),t={},a=0;a<e.length;a++){var n=e[a].craft;t[n]=t[n]?t[n]+1:1}var r=Object.keys(t);if(0===r.length)return".";if(1===r.length)return" and all of them are aboard the ".concat(r[0],".");for(var s="",o=0;o<r.length;o++){var c=t[r[o]];0===o?s+=". ".concat(c," ").concat(this.pluralizer(c)," aboard the ").concat(r[o]):o!==r.length-1?s+=", ".concat(c," ").concat(this.pluralizer(c)," aboard the ").concat(r[o]):s+=", and ".concat(c," ").concat(this.pluralizer(c)," aboard the ").concat(r[o],".")}return s}},{key:"shouldComponentUpdate",value:function(e){return this.props.astronauts!==e.astronauts}},{key:"render",value:function(){if(null===this.props.astronauts)return r.a.createElement("div",null,r.a.createElement("h1",null,"Astronauts in Space"),r.a.createElement("p",null),r.a.createElement("ul",{className:"astronauts"}));if(this.props.astronauts){var e=this.props.astronauts.people.map((function(e){return r.a.createElement(A,{person:e,key:e.name})}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Astronauts in Space"),r.a.createElement("p",null,"There are currently ",r.a.createElement("strong",null,this.props.astronauts.number)," ","astronauts in space",this.getCrafts()),r.a.createElement("ul",{className:"astronauts"},e))}return r.a.createElement("div",null,r.a.createElement("h1",null,"Astronauts in Space"),r.a.createElement("p",{className:"astronauts"},r.a.createElement("i",{className:"exclamation triangle icon"}),"Unable to get current astronauts."))}}]),t}(r.a.Component),D=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){if(this.props.coords===[]||null===this.props.timestamp)return r.a.createElement("div",null,r.a.createElement("h1",null,"Current Location of the ISS"),r.a.createElement("div",{className:"location-info"},r.a.createElement("p",null)));if(this.props.coords!==[]&&this.props.timestamp){var e="".concat(this.props.coords[1],", ").concat(this.props.coords[0]),t=new Date(parseInt(this.props.timestamp+"000")).toLocaleTimeString();return r.a.createElement("div",null,r.a.createElement("h1",null,"Current Location of the ISS"),r.a.createElement("div",{className:"location-info"},r.a.createElement("p",{className:"coords"},e),r.a.createElement("p",null,t)))}return r.a.createElement("div",null,r.a.createElement("h1",null,"Current Location of the ISS"),r.a.createElement("div",{className:"location-info"},r.a.createElement("p",null,r.a.createElement("i",{className:"exclamation triangle icon"}),"Unable to get current location. Retrying in 5 seconds...")))}}]),t}(r.a.Component),F=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={coords:[],timestamp:null,astronauts:null},a.getAstronauts=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://space-api-server.herokuapp.com/api/astros.json",e.prev=1,e.next=4,f.a.get("https://space-api-server.herokuapp.com/api/astros.json");case 4:t=e.sent,a.setState({astronauts:t.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),a.setState({astronauts:void 0});case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),a.getLocation=Object(l.a)(i.a.mark((function e(){var t,n,r,s,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://space-api-server.herokuapp.com/api/iss-now.json",e.prev=1,e.next=4,f.a.get("https://space-api-server.herokuapp.com/api/iss-now.json");case 4:t=e.sent,n=t.data.iss_position,r=n.latitude,s=n.longitude,o=t.data.timestamp,c=[parseFloat(s),parseFloat(r)],a.setState({coords:c,timestamp:o}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),a.setState({coords:[],timestamp:void 0});case 14:case"end":return e.stop()}}),e,null,[[1,11]])}))),a}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.getAstronauts(),setInterval((function(){e.getAstronauts()}),3e5),this.getLocation(),setInterval((function(){e.getLocation()}),5e3)}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui container main"},r.a.createElement(P,{astronauts:this.state.astronauts}),r.a.createElement(D,{coords:this.state.coords,timestamp:this.state.timestamp}),r.a.createElement(z,{coords:this.state.coords}),r.a.createElement("p",{className:"attribution"},"Data provided courtesy of"," ",r.a.createElement("a",{href:"http://open-notify.org/Open-Notify-API/ISS-Location-Now/"},"Open Notify.")," ","Icons by"," ",r.a.createElement("a",{href:"https://www.flaticon.com/authors/srip",title:"srip"},"srip")," ","under"," ",r.a.createElement("a",{href:"http://creativecommons.org/licenses/by/3.0/",title:"Creative Commons BY 3.0",target:"_blank",rel:"noopener noreferrer"},"CC 3.0 BY.")))}}]),t}(r.a.Component);o.a.render(r.a.createElement(F,null),document.querySelector("#root"))},98:function(e,t,a){e.exports=a(123)}},[[98,1,2]]]);
//# sourceMappingURL=main.e3d8b8c4.chunk.js.map